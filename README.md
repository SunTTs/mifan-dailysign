# 🍚 米饭APP每日签到脚本

一个基于青龙面板的[米饭APP](https://mifan.61.com/)自动签到脚本，支持多账号签到、签到结果通知。

## 🌟 功能特性

- ✅ 青龙面板完美兼容
- ✅ 自动每日签到米饭APP（0成本永续摩尔庄园超拉）
- ✅ 支持多账号签到（模拟登录方式，无需token）
- ✅ 支持青龙面板多渠道签到结果通知
- ✅ 良好的日志记录和重试机制

## 🚀 使用方法

### 1. 青龙面板添加订阅

| 项目 | 值 |
| :--- | :--- |
| 名称 | `米饭APP签到` |
| 链接 | `https://github.com/SunTTs/mifan-dailysign.git` |
| 定时 | `30 8 * * *`（每天上午8点30分执行） |

### 2. 配置必需环境变量

| 环境变量名 | 描述 | 示例值 |
| :--- | :---| :--- |
| `MIFAN_USER` | 米饭账号 | `user1;user2;user3` |
| `MIFAN_PASSWORD` | 米饭账号密码 | `pwd1;pwd2;pwd3` |

> [!TIP]
> - 多账号使用英文分号 `;` 分隔，单账号不需要分号
> - 注意账号与密码位置对应，例如`user2`对应的密码为`pwd2`

### 3. 安装依赖

1. 在青龙面板左侧菜单中点击 `依赖管理` -> `创建依赖`
2. 选择 `nodejs` 类型并输入依赖名称 `axios`
3. 等待安装成功即可

> [!TIP]
> 一般来说青龙面板自带依赖 `crypto`，如提示缺失依赖，额外安装即可。

### 4. 运行脚本

运行一次订阅，设置定时任务，建议时间：`0 9 * * *` （每天上午9点执行）

## 📢 通知（可选）

1. 添加环境变量（不添加或值为 `false` 时不推送通知）

   | 环境变量名称 | 描述 | 默认值 |
   | :- | :- | :- |
   | `MIFAN_SUCCESS_NOTIFY` | 签到成功时通知 | `false` |
   | `MIFAN_FAIL_NOTIFY` | 签到失败时通知 | `false` |

2. 配置通知渠道

   在青龙面板 `配置文件` 中的 `config.sh` 中按需填入相对应的推送API的环境变量即可。

### 支持的通知服务

使用青龙面板自带通知服务，理论上只要面板支持且配置正确都可用，具体支持渠道详见面板 `config.sh` 文件

> 目前仅测试 `邮箱` 通知，如有问题请反馈

## 🛠️ 常见问题

### 登录失败，显示“系统维护中”

**解决方法1**：

1. 打开[米饭APP](https://mifan.61.com/)
2. 使用浏览器开发者工具
3. 登录账号后找到 login 负载数据的 `gid` 字段
4. 复制 `gid` 字段后面的值
5. 创建环境变量 `MIFAN_GID` 并填入

**解决方法2**：

在青龙面板 `脚本管理` 中编辑源文件 `mifan-dailysign.js`，注释掉第110行即可

## 📝 更新日志

### v1.2.0 (2026-02-22)
- 支持模拟登录方式进行签到，无需token

### v1.1.0 (2026-02-21)
- 新增支持签到结果通知

### v1.0.0 (2026-02-20)
- 初始版本发布
- 支持多账号签到